ARM GAS  context/ucontext_asm.s 			page 1


   1              	    .syntax unified
   2              	    .arch armv7-m
   3              	
   4              	.text
   5              	
   6              	.set P_ucontext_t           , 0
   7              	.set stack_t_Pss_sp         , 1 * 4
   8              	.set stack_t_ss_size        , 2 * 4
   9              	.set stack_t_ss_flags       , 3 * 4
  10              	.set mcontext_t_regPC       , 4 * 4  //; // program counter
  11              	.set mcontext_t_regSP       , 5 * 4  //	int ; // stack pointer
  12              	.set mcontext_t_regCPSR     , 6 * 4  //; // status register
  13              	.set mcontext_t_regR0       , 7 * 4
  14              	.set mcontext_t_regR1       , 8 * 4
  15              	.set mcontext_t_regR2       , 9 * 4
  16              	.set mcontext_t_regR3       ,10 * 4
  17              	.set mcontext_t_regR4       ,11 * 4
  18              	.set mcontext_t_regR5       ,12 * 4
  19              	.set mcontext_t_regR6       ,13 * 4
  20              	.set mcontext_t_regR7       ,14 * 4
  21              	.set mcontext_t_regR8       ,15 * 4
  22              	.set mcontext_t_regR9       ,16 * 4
  23              	.set mcontext_t_regR10      ,17 * 4
  24              	.set mcontext_t_regR11      ,18 * 4
  25              	.set mcontext_t_regR12      ,19 * 4
  26              	.set mcontext_t_regR13      ,20 * 4
  27              	.set mcontext_t_regR14      ,21 * 4
  28              	.set mcontext_t_regR15      ,22 * 4
  29              	.set ucontext_t_func        ,23 * 4
  30              	.set ucontext_t_initialized ,24 * 4
  31              	
  32              	
  33              	.global get_context_asm
  34              	get_context_asm:
  35              	
  36              	//	push     {lr}					
  37 0000 C0F81C00 		str.w       r0,  [r0,#mcontext_t_regR0]
  38 0004 C0F82010 		str.w       r1,  [r0,#mcontext_t_regR1]
  39 0008 C0F82420 		str.w       r2,  [r0,#mcontext_t_regR2]
  40 000c C0F82830 		str.w       r3,  [r0,#mcontext_t_regR3]
  41 0010 C0F82C40 		str.w       r4,  [r0,#mcontext_t_regR4]
  42 0014 C0F83050 		str.w       r5,  [r0,#mcontext_t_regR5]
  43 0018 C0F83460 		str.w       r6,  [r0,#mcontext_t_regR6]
  44 001c C0F83870 		str.w       r7,  [r0,#mcontext_t_regR7]
  45 0020 C0F83C80 		str.w       r8,  [r0,#mcontext_t_regR8]
  46 0024 C0F84090 		str.w       r9,  [r0,#mcontext_t_regR9]
  47 0028 C0F844A0 		str.w       r10, [r0,#mcontext_t_regR10]
  48 002c C0F848B0 		str.w       r11, [r0,#mcontext_t_regR11]
  49 0030 C0F84CC0 		str.w       r12, [r0,#mcontext_t_regR12]
  50 0034 C0F850D0 		str.w       r13, [r0,#mcontext_t_regR13]
  51 0038 C0F854E0 		str.w       r14, [r0,#mcontext_t_regR14]
  52 003c 08B4     		push	  {r3}
  53              		//mov	      r3, #regR15
  54              	//    mov       r3, r15
  55 003e 7B46     	    mov         r3, pc //r15
  56              	    //add       r3, #6
  57 0040 C0F85830 		str.w       r3,  [r0,#mcontext_t_regR15]
ARM GAS  context/ucontext_asm.s 			page 2


  58 0044 08BC     		pop       {r3}
  59              	//	pop     {pc}					
  60 0046 7047     	    bx        lr //; return
  61              	
  62              	
  63              	.global set_context_asm
  64              	set_context_asm:
  65              	
  66              	
  67              	//    push    {lr}
  68 0048 016A     		LDR	 r1 ,  [r0 ,#mcontext_t_regR1]
  69 004a 426A     	    LDR  r2 ,  [r0 ,#mcontext_t_regR2]
  70 004c 836A     	    LDR  r3 ,  [r0 ,#mcontext_t_regR3]
  71 004e C46A     	    LDR  r4 ,  [r0 ,#mcontext_t_regR4]
  72 0050 056B     	    LDR  r5 ,  [r0 ,#mcontext_t_regR5]
  73 0052 466B     	    LDR  r6 ,  [r0 ,#mcontext_t_regR6]
  74 0054 876B     	    LDR  r7 ,  [r0 ,#mcontext_t_regR7]
  75 0056 D0F83C80 	    LDR  r8 ,  [r0 ,#mcontext_t_regR8]
  76 005a D0F84090 	    LDR  r9 ,  [r0 ,#mcontext_t_regR9]
  77 005e D0F844A0 	    LDR  r10,  [r0 ,#mcontext_t_regR10]
  78 0062 D0F848B0 	    LDR  r11,  [r0 ,#mcontext_t_regR11]
  79 0066 D0F84CC0 	    LDR  r12,  [r0 ,#mcontext_t_regR12]
  80              	//    LDR  r13,  [r0 ,#mcontext_t_regR13]
  81 006a D0F854E0 	    LDR  r14,  [r0 ,#mcontext_t_regR14]
  82              	
  83 006e 016E     		LDR	 r1 ,  [r0 ,#ucontext_t_initialized]
  84 0070 0029     		CMP  r1 , 0
  85 0072 08D1     		BNE  inicializado
  86              	
  87              	    // ainda não inicializado
  88 0074 4FF00101 	    mov  r1,   #1
  89 0078 0166     		STR  r1 ,  [r0 ,#ucontext_t_initialized]
  90 007a 016A     		LDR	 r1 ,  [r0 ,#mcontext_t_regR1]
  91 007c D0F804D0 		ldr  R13,  [r0 ,#stack_t_Pss_sp]
  92 0080 D0F85CF0 	    LDR  r15,  [r0 ,#ucontext_t_func]
  93              	//	pop     {pc}					
  94 0084 7047     	    bx     lr
  95              	
  96              	inicializado:
  97 0086 016A     		LDR	 r1 ,  [r0 ,#mcontext_t_regR1]
  98 0088 D0F850D0 	    LDR  r13,  [r0 ,#mcontext_t_regR13]
  99              	//    LDR  r15,  [r0 ,#mcontext_t_regR15]
 100 008c D0F854F0 	    LDR  r15,  [r0 ,#mcontext_t_regR14]
 101              	//	pop     {pc}					
 102 0090 7047     	    bx     lr
 103              	//	.end
 104              	////////////////////////  SWAP BEG /////////////////////
 105              	.global swap_context_asm
 106              	swap_context_asm:
 107              	
 108 0092 C0F81C00 		str.w       r0,  [r0,#mcontext_t_regR0]
 109 0096 C0F82010 		str.w       r1,  [r0,#mcontext_t_regR1]
 110 009a C0F82420 		str.w       r2,  [r0,#mcontext_t_regR2]
 111 009e C0F82830 		str.w       r3,  [r0,#mcontext_t_regR3]
 112 00a2 C0F82C40 		str.w       r4,  [r0,#mcontext_t_regR4]
 113 00a6 C0F83050 		str.w       r5,  [r0,#mcontext_t_regR5]
 114 00aa C0F83460 		str.w       r6,  [r0,#mcontext_t_regR6]
ARM GAS  context/ucontext_asm.s 			page 3


 115 00ae C0F83870 		str.w       r7,  [r0,#mcontext_t_regR7]
 116 00b2 C0F83C80 		str.w       r8,  [r0,#mcontext_t_regR8]
 117 00b6 C0F84090 		str.w       r9,  [r0,#mcontext_t_regR9]
 118 00ba C0F844A0 		str.w       r10, [r0,#mcontext_t_regR10]
 119 00be C0F848B0 		str.w       r11, [r0,#mcontext_t_regR11]
 120 00c2 C0F84CC0 		str.w       r12, [r0,#mcontext_t_regR12]
 121 00c6 C0F850D0 		str.w       r13, [r0,#mcontext_t_regR13]
 122 00ca C0F854E0 		str.w       r14, [r0,#mcontext_t_regR14]
 123 00ce 08B4     		push	  {r3}
 124              		//mov	      r3, #regR15
 125              	//    mov       r3, r15
 126 00d0 7B46     	    mov         r3, pc //r15
 127              	    //add       r3, #6
 128 00d2 C0F85830 		str.w       r3,  [r0,#mcontext_t_regR15]
 129 00d6 08BC     		pop       {r3}
 130              	//	pop     {pc}					
 131              	//    bx        lr //; return
 132              	///////////////////////  end get   beg set
 133              		
 134              		//LDR	 r1 ,  [r1 ,#mcontext_t_regR1]
 135 00d8 4A6A     	    LDR  r2 ,  [r1 ,#mcontext_t_regR2]
 136 00da 8B6A     	    LDR  r3 ,  [r1 ,#mcontext_t_regR3]
 137 00dc CC6A     	    LDR  r4 ,  [r1 ,#mcontext_t_regR4]
 138 00de 0D6B     	    LDR  r5 ,  [r1 ,#mcontext_t_regR5]
 139 00e0 4E6B     	    LDR  r6 ,  [r1 ,#mcontext_t_regR6]
 140 00e2 8F6B     	    LDR  r7 ,  [r1 ,#mcontext_t_regR7]
 141 00e4 D1F83C80 	    LDR  r8 ,  [r1 ,#mcontext_t_regR8]
 142 00e8 D1F84090 	    LDR  r9 ,  [r1 ,#mcontext_t_regR9]
 143 00ec D1F844A0 	    LDR  r10,  [r1 ,#mcontext_t_regR10]
 144 00f0 D1F848B0 	    LDR  r11,  [r1 ,#mcontext_t_regR11]
 145 00f4 D1F84CC0 	    LDR  r12,  [r1 ,#mcontext_t_regR12]
 146              	//    LDR  r13,  [r0 ,#mcontext_t_regR13]
 147 00f8 D1F854E0 	    LDR  r14,  [r1 ,#mcontext_t_regR14]
 148              	
 149 00fc 086E     		LDR	 r0 ,  [r1 ,#ucontext_t_initialized]
 150 00fe 0028     		CMP  r0 , 0
 151 0100 07D1     		BNE  inicializado1
 152              	
 153              	    // ainda não inicializado
 154 0102 4FF00100 	    mov  r0,   #1
 155 0106 0866     		STR  r0 ,  [r1 ,#ucontext_t_initialized]
 156              		//LDR	 r1 ,  [r1 ,#mcontext_t_regR1]
 157 0108 D1F804D0 		ldr  R13,  [r1 ,#stack_t_Pss_sp]
 158 010c D1F85CF0 	    LDR  r15,  [r1 ,#ucontext_t_func]
 159 0110 7047     	    bx     lr
 160              	
 161              	inicializado1:
 162              		//LDR	 r1 ,  [r1 ,#mcontext_t_regR1]
 163 0112 D1F850D0 	    LDR  r13,  [r1 ,#mcontext_t_regR13]
 164              	//    LDR  r15,  [r1 ,#mcontext_t_regR15]
 165 0116 D1F854F0 	    LDR  r15,  [r1 ,#mcontext_t_regR14]
 166              	//	pop     {pc}					
 167 011a 7047     	    bx     lr
 168              	
 169              	////////////////////////  SWAP END /////////////////////
 170              	
 171              		
ARM GAS  context/ucontext_asm.s 			page 4


ARM GAS  context/ucontext_asm.s 			page 5


DEFINED SYMBOLS
                            *ABS*:00000001 TM4C1294NCPDT
                            *ABS*:000002db __GCC_VERSION
                            *ABS*:00000001 __GCC
                            *ABS*:0000020d __UVISION_VERSION
context/ucontext_asm.s:6      *ABS*:00000000 P_ucontext_t
context/ucontext_asm.s:7      *ABS*:00000004 stack_t_Pss_sp
context/ucontext_asm.s:8      *ABS*:00000008 stack_t_ss_size
context/ucontext_asm.s:9      *ABS*:0000000c stack_t_ss_flags
context/ucontext_asm.s:10     *ABS*:00000010 mcontext_t_regPC
context/ucontext_asm.s:11     *ABS*:00000014 mcontext_t_regSP
context/ucontext_asm.s:12     *ABS*:00000018 mcontext_t_regCPSR
context/ucontext_asm.s:13     *ABS*:0000001c mcontext_t_regR0
context/ucontext_asm.s:14     *ABS*:00000020 mcontext_t_regR1
context/ucontext_asm.s:15     *ABS*:00000024 mcontext_t_regR2
context/ucontext_asm.s:16     *ABS*:00000028 mcontext_t_regR3
context/ucontext_asm.s:17     *ABS*:0000002c mcontext_t_regR4
context/ucontext_asm.s:18     *ABS*:00000030 mcontext_t_regR5
context/ucontext_asm.s:19     *ABS*:00000034 mcontext_t_regR6
context/ucontext_asm.s:20     *ABS*:00000038 mcontext_t_regR7
context/ucontext_asm.s:21     *ABS*:0000003c mcontext_t_regR8
context/ucontext_asm.s:22     *ABS*:00000040 mcontext_t_regR9
context/ucontext_asm.s:23     *ABS*:00000044 mcontext_t_regR10
context/ucontext_asm.s:24     *ABS*:00000048 mcontext_t_regR11
context/ucontext_asm.s:25     *ABS*:0000004c mcontext_t_regR12
context/ucontext_asm.s:26     *ABS*:00000050 mcontext_t_regR13
context/ucontext_asm.s:27     *ABS*:00000054 mcontext_t_regR14
context/ucontext_asm.s:28     *ABS*:00000058 mcontext_t_regR15
context/ucontext_asm.s:29     *ABS*:0000005c ucontext_t_func
context/ucontext_asm.s:30     *ABS*:00000060 ucontext_t_initialized
context/ucontext_asm.s:34     .text:00000000 get_context_asm
context/ucontext_asm.s:37     .text:00000000 $t
context/ucontext_asm.s:64     .text:00000048 set_context_asm
context/ucontext_asm.s:96     .text:00000086 inicializado
context/ucontext_asm.s:106    .text:00000092 swap_context_asm
context/ucontext_asm.s:161    .text:00000112 inicializado1

NO UNDEFINED SYMBOLS
